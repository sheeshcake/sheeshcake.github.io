<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
</head>

<body>

    <div id="loading">Loading...</div>
    <button id="button">Play</button>
    <div id="player"></div>
    <script src="https://cdn.jsdelivr.net/npm/@webtor/embed-sdk-js/dist/index.min.js" charset="utf-8" async></script>
    <script>
        var button = document.getElementById('button');
        var player = document.getElementById('player');
        var loading = document.getElementById('loading');
        player.style.display = 'none';
        loading.style.display = 'none';

        button.addEventListener('click', function () {
            button.style.display = 'none';
            loading.style.display = 'block';
            initPlayer();
        });

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const tid = urlParams.get('tid')
        const dn = urlParams.get('dn')
        var trackers = [
            'http://tracker.trackerfix.com:80/announce',
            'udp://9.rarbg.me:2720/announce',
            'udp://9.rarbg.to:2900/announce',
            'udp://tracker.thinelephant.org:12710/announce',
            'udp://tracker.slowcheetah.org:14780/announce',
            'udp://tracker.zer0day.to:1337/announce',
            'udp://tracker.leechers-paradise.org:6969/announce',
            'udp://coppersurfer.tk:6969/announce'
        ];
        var magnet = `magnet:?xt=urn:btih:${tid}&dn=${dn}&tr=${trackers.join('&tr=')}`;
        function initPlayer() {
            window.webtor = window.webtor || [];
            window.webtor.push({
                id: 'player',
                width: '100%',
                magnet: magnet,
                on: function (e) {
                    if (e.name == window.webtor.INITED) {
                        e.player.play();
                        player.style.display = 'block';
                        loading.style.display = 'none';
                    }
                },
            });
        }


    </script>
</body>
</html>